<VirtualHost *:18880>
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/html/warning
    
    ServerName captive.portal
    ServerAlias *

    <Directory /var/www/html/warning>
        DirectoryIndex warning.html
        Options -Indexes +FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>
    
    # Windows (NCSI - MSFT Connect Test)
    Alias /ncsi.txt /var/www/html/warning/warning.html
    Alias /connecttest.txt /var/www/html/warning/warning.html
    Alias /redirect /var/www/html/warning/warning.html
    Alias /msftconnecttest/redir.htm /var/www/html/warning/warning.html
    Alias /ncsi/redirect /var/www/html/warning/warning.html

    # Microsoft Edge (Chromium)
    Alias /captiveportal/generate_204 /var/www/html/warning/warning.html
    Alias /edge-captiveportal/generate_204 /var/www/html/warning/warning.html

    # Android (Google Captive Portal Check)
    Alias /generate_204 /var/www/html/warning/warning.html
    Alias /gen_204 /var/www/html/warning/warning.html
    Alias /mobile/status.php /var/www/html/warning/warning.html

    # Apple iOS - macOS
    Alias /hotspot-detect.html /var/www/html/warning/warning.html
    Alias /library/test/success.html /var/www/html/warning/warning.html
    Alias /success.txt /var/www/html/warning/warning.html
    Alias /hotspot.txt /var/www/html/warning/warning.html

    # Firefox Captive Portal
    Alias /captive-portal-success.html /var/www/html/warning/warning.html

    # GNOME / KDE (Linux)
    Alias /nmcheck.txt /var/www/html/warning/warning.html
    Alias /check_network_status.txt /var/www/html/warning/warning.html
    Alias /conncheck.html /var/www/html/warning/warning.html
    Alias /check_network.txt /var/www/html/warning/warning.html

    # Extras
    Alias /favicon.ico /var/www/html/warning/warning.html
    Alias /success.html /var/www/html/warning/warning.html
    Alias /success /var/www/html/warning/warning.html

    RewriteEngine On

    RewriteCond %{REQUEST_URI} !^/warning\.html$
    RewriteCond %{REQUEST_URI} !^/$
    RewriteRule ^.*$ /warning.html [L]

    ErrorLog ${APACHE_LOG_DIR}/warning_error.log
    CustomLog ${APACHE_LOG_DIR}/warning_access.log combined
</VirtualHost>

